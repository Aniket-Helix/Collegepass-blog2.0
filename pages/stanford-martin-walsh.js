import React, { Fragment, useState, useEffect } from 'react'
import Head from 'next/head'
import { Container, Row, Col, Button} from 'react-bootstrap'
import { useDispatch,useSelector } from 'react-redux'
import Image from 'next/image'
import Link from 'next/link'
// import CustomRegistrationScreen from '../../screens/CustomRegistrationScreen'
import styles from '../screens/CustomRegistrationScreen/custom.module.scss'
import EventRegistration from '../components/Modal/EventRegistration'
import { getEventDetails } from '../actions/eventRegistrationActions'
import { APIgetRegEvents } from '../config/API'
import axios from 'axios'
// import { useRouter } from 'next/router'


export default function Reg() {
  const auth = useSelector((state) => state.auth)
  const dispatch = useDispatch()
  const [showRegModal, setShowRegModal] = useState(false)
  const handleCloseRegModal = () => setShowRegModal(false)
  const handleShowRegModal = () => setShowRegModal(true)
  const eventDetails = useSelector((state) => state.eventDetails.eventDetails)
  const [registeredEvents, setRegisteredEvents] = useState([])
  const[registered, setregistered] = useState(false)
  // const router = useRouter()
  // console.log(eventDetails)
  useEffect(() => {
    const getRegEvents = async () => {
      const config = {
        headers: {
          'Content-Type': 'application/json',
          Authorization: `Bearer ${localStorage.token}`,
        },
      }
      const regEvents = await axios.get(
        `${APIgetRegEvents}${auth.userDetails.ID}`,
        config
      )
      // console.log(regEvents,"registered events")
      setRegisteredEvents(regEvents.data.events)
    }
    if (auth.userDetails.ID) {
      getRegEvents()
    }
  }, [auth])

  useEffect(() => {
      dispatch(getEventDetails(84512334500))
  }, [])

  useEffect(() => {
    if(registeredEvents.length>0)
    {
      let alreadyRegistered = false
      alreadyRegistered = registeredEvents?.find((regEve) => {
        return regEve.ZOOMID === '84512334500'
      })
      if(alreadyRegistered)
      {
        setregistered(alreadyRegistered)
      }
    }
  }, [registeredEvents])
  return (
    <>
      <Head>
        <title>CollegePass - Registration</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
        <link rel="canonical" href="https://www.collegepass.org/about" />
        <meta property="og:url" content="https://www.collegepass.org/terms" />
        <meta property="og:type" content="website" />
        <meta property="og:image" content="" />
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:image" content="" />
      </Head>
      <main>
      <Container fluid className="bg-black pt-5 pb-5">
      <EventRegistration
        show={showRegModal}
        handleClose={handleCloseRegModal}
        eventDetails={eventDetails}
      />
        <Row>
          <Col className={styles.eventBannerDetails}>
            <Row>
              <Col className={styles.eventBanner}>
                <Image
                  width={800}
                  height={450}
                  layout="responsive"
                  quality={65}
                  src="https://collegepass.s3.ap-south-1.amazonaws.com/stanford_13_Aug.jpg"
                  alt="Event Banner"
                />
              </Col>
            </Row>
            <Row className={styles.eventBannerText}>
              <Col>
                <Row>
                  <Col className="mt-4 pt-2">
                    <Image
                      width="55"
                      height="50"
                      src="/white-holo-n-background.png"
                      alt="White Holo"
                    />
                  </Col>
                </Row>
                <Row>
                  <Col>
                    <h1>IVY LEAGUE ADMISSIONS WORKSHOP</h1>
                  </Col>
                </Row>
                <Row>
                  <Col>
                    <h3 className={styles.phoneTitle}>By Martin Walsh, Former Assistant Dean of Admissions, Stanford University</h3>
                  </Col>
                </Row>
                <Row>
                  <Col>
                    <h5>Saturday, August 13</h5>
                  </Col>
                </Row>
                <Row>
                  <Col>
                    <h6>09:30 PM Asia/Kolkata</h6>
                  </Col>
                </Row>
                <Row>
                  <Col>
                    {/* <Link href={`/registration-success/${eventID}`}>
                    <Button>Register</Button>
                    </Link> */}
                  </Col>
                </Row>
              </Col>
            </Row>
          </Col>
        </Row>
        <Container fluid style={{
          background: '#272c33',
          padding: '30px 0px'
        }}>
          <Container>
            <Row>
              <Col className={styles.martinSection}>
                <Row>
                  <Col className={styles.martinTitleSection}>
                      <h1>MEET MARTIN WALSH</h1>
                      <p>Learn from the former Assistant Dean of Admissions at Stanford</p>
                  </Col>
                </Row>
                <Row>
                  <Col lg={6} md={6} sm={12} xs={12}>
                    <Row>
                      <Col className="text-center">
                        <Image
                        width="296"
                        height="296"
                        src="https://collegepass.s3.ap-south-1.amazonaws.com/martin_walsh.png"
                        alt="White Holo"
                      />
                      </Col>
                    </Row>
                  </Col>
                  <Col lg={6} md={6} sm={12} xs={12} className={styles.walseSection}>
                    <h2>WHO IS MARTIN WALSH</h2>
                    <p>Martin Walsh was the Assistant Dean of admissions at Stanford University and the Former Director of Admission at Santa Clara University, in addition to being a member of the University of Chicago’s Counselor Advisory Board. He has degrees in History, Education and Law and 12 years experience as a counselor for students and 10+ years experience training international school counselors.</p>
                    <p>To hear more of his advice join us in our webinar.</p>
                  </Col>
                </Row>
              </Col>
            </Row>
          </Container>
        </Container>
        <Container>
          <Row className={styles.eventDesc}>
            <Col>
              <Row>
                <Col>
                  <h2
                    style={{
                      color: '#e6a851',
                      margin: '15px 0px'
                    }}
                  >
                    EVENT DESCRIPTION
                  </h2>
                </Col>
              </Row>
              <Row>
                <Col>
                  <div>
                    <p>Want to know how to pitch yourself to top colleges in the US successfully?</p>
                    <p>Join us for an exclusive one-of-a-kind event for Grade 9-12 Students & Parents on ‘Crafting a Winning Strategy for College Admissions in the US’</p>
                    
                    <p>Join <span style={{
                      color: '#e6a851'
                    }}>Martin Walsh</span>, Former Assistant Dean of admissions at Stanford University and the Former Director of Admission at Santa Clara University, in addition to being a member of the University of Chicago’s Counselor Advisory Board, as he delves into the world of admissions and how Covid-19 has led to the emergence of various trends that play a vital role in the entire process.</p><br/>
                    <p className={styles.mazorTake}><strong>MAJOR TAKEAWAYS</strong></p>
                    <p>- How do admission officers in Ivy League and other Top US schools analyze your application?</p>
                    <p>- Learn about the latest admission trends in the "Post Covid Era"</p>
                    <p>- How important are extracurriculars? </p>
                    <p>- The importance of essays </p>
                    <p>- The relevance of Standardised Testing (SAT/ACT) and Test Optionality, </p>
                    <p>- How to curate a top-notch application strategy and deliver a winning pitch </p><br/>
                    <p>At CollegePass, we aim to address critical questions and provide our audience real-time information on applying to some of the most prestigious colleges globally. What better than hearing it from a former admissions officer at Stanford? </p>
                    <p>Prepare a list of questions you'd like to ask Martin and register at the earliest; we only have limited seats!</p>
                  </div>
                </Col>
              </Row>
            </Col>
          </Row>
        </Container>
        <Container fluid>
          <Container>
            <Row>
              <Col className={styles.howToJoinWalse}>
                {/*<Row>
                  <Col className={styles.dateTimeSection}>
                    <span>22 Aug</span>
                    <span>7:00 PM onwards</span>
                  </Col>
                </Row>*/}
                <Row>
                  <Col className="text-center">
                      {registered?<Button disabled>Seat booked</Button>:<Button onClick={handleShowRegModal}>Book your seat</Button>}
                      {/*<Button>Book your seat for ₹999 <br/><span style={{
                        fontSize: '16px'
                      }}>Secured by Razorpay</span></Button>*/}
                  </Col>
                </Row>
              </Col>
            </Row>
          </Container>
        </Container>
      </Container>
      </main>
    </>
  )
}